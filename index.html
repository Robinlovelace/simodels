<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Flexible Framework for Developing Spatial Interaction Models • simodels</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Flexible Framework for Developing Spatial Interaction Models">
<meta name="description" content="Develop spatial interaction models (SIMs). SIMs predict the amount of interaction, for example number of trips per day, between geographic entities representing trip origins and destinations. Contains functions for creating origin-destination datasets from geographic input datasets and calculating movement between origin-destination pairs with constrained, production-constrained, and attraction-constrained models (Wilson 1979) &lt;doi:10.1068/a030001&gt;.">
<meta property="og:description" content="Develop spatial interaction models (SIMs). SIMs predict the amount of interaction, for example number of trips per day, between geographic entities representing trip origins and destinations. Contains functions for creating origin-destination datasets from geographic input datasets and calculating movement between origin-destination pairs with constrained, production-constrained, and attraction-constrained models (Wilson 1979) &lt;doi:10.1068/a030001&gt;.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">simodels</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/simodels.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/sims-first-principles.html">An introduction to spatial interaction models: from first principles</a></li>
    <li><a class="dropdown-item" href="articles/validation.html">Validation of spatial interaction models</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/robinlovelace/simodels/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<p>The goal of {simodels} is to provide a simple, <a href="https://www.tidyverse.org/" class="external-link">tidy</a>, and flexible framework for developing spatial interaction models (SIMs). SIMs estimate the amount of movement between spatial entities and can be used for many things, including to support evidence-based investment in sustainable transport infrastructure and prioritisation of location options for public services.</p>
<p>Unlike many software tools designed to support spatial interaction modelling, {simodels} does not define (or even encourage use of) any particular functional forms or modelling frameworks for predicting movement between origins and destinations. Instead, it provides a framework enabling you to use model function forms or models of your choosing, ensuring flexibility and encouraging flexibility.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the package as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span> <span class="co"># if not already installed</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"robinlovelace/simodels"</span><span class="op">)</span></span></code></pre></div>
<p>To get the develoment version do:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">load_all</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<!-- # Implementations in other languages -->
</div>
<div class="section level2">
<h2 id="simodel-basics">simodel basics<a class="anchor" aria-label="anchor" href="#simodel-basics"></a>
</h2>
<p>Run a basic SIM as follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/robinlovelace/simodels" class="external-link">simodels</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co"># prepare OD data</span></span>
<span><span class="va">od</span> <span class="op">=</span> <span class="fu"><a href="reference/si_to_od.html">si_to_od</a></span><span class="op">(</span></span>
<span>  origins <span class="op">=</span> <span class="va">si_zones</span>,        <span class="co"># origin locations</span></span>
<span>  destinations <span class="op">=</span> <span class="va">si_zones</span>,   <span class="co"># destination locations</span></span>
<span>  max_dist <span class="op">=</span> <span class="fl">5000</span>            <span class="co"># maximum distance between OD pairs</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co"># specify a function</span></span>
<span><span class="va">gravity_model</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">beta</span>, <span class="va">d</span>, <span class="va">m</span>, <span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">m</span> <span class="op">*</span> <span class="va">n</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">beta</span> <span class="op">*</span> <span class="va">d</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="op">}</span> </span>
<span><span class="co"># perform SIM</span></span>
<span><span class="va">od_res</span> <span class="op">=</span> <span class="fu"><a href="reference/si_calculate.html">si_calculate</a></span><span class="op">(</span></span>
<span>  <span class="va">od</span>,</span>
<span>  fun <span class="op">=</span> <span class="va">gravity_model</span>,</span>
<span>  d <span class="op">=</span> <span class="va">distance_euclidean</span>,</span>
<span>  m <span class="op">=</span> <span class="va">origin_all</span>,</span>
<span>  n <span class="op">=</span> <span class="va">destination_all</span>,</span>
<span>  constraint_production <span class="op">=</span> <span class="va">origin_all</span>,</span>
<span>  beta <span class="op">=</span> <span class="fl">0.9</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co"># visualize the results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">od_res</span><span class="op">$</span><span class="va">distance_euclidean</span>, <span class="va">od_res</span><span class="op">$</span><span class="va">interaction</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-distance-1.png"></p>
<p>What just happened? We created an ‘OD data frame’ with the function <code><a href="reference/si_to_od.html">si_to_od()</a></code> from geographic origins and destinations, and then estimated a simple ‘production constrained’ (with the <code>constraint_production</code> argument) gravity model based on the population in origin and destination zones and a custom distance decay function with <code><a href="reference/si_calculate.html">si_calculate()</a></code>. As the example above shows, the package allows/encourages you to define and use your own functions to estimate the amount of interaction/movement between places.</p>
<p>The approach is also ‘tidy’, allowing use of {simodels} functions in {dplyr} pipelines:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">od_res</span> <span class="op">=</span> <span class="va">od</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/si_calculate.html">si_calculate</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">gravity_model</span>, </span>
<span>               m <span class="op">=</span> <span class="va">origin_all</span>,</span>
<span>               n <span class="op">=</span> <span class="va">destination_all</span>,</span>
<span>               d <span class="op">=</span> <span class="va">distance_euclidean</span>,</span>
<span>               constraint_production <span class="op">=</span> <span class="va">origin_all</span>,</span>
<span>               beta <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span>
<span><span class="va">od_res</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">interaction</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>Simple feature collection with <span class="dv">2505</span> features and <span class="dv">1</span> field</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>Geometry type<span class="sc">:</span> LINESTRING</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>Dimension<span class="sc">:</span>     XY</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>Bounding box<span class="sc">:</span>  xmin<span class="sc">:</span> <span class="sc">-</span><span class="fl">1.743949</span> ymin<span class="sc">:</span> <span class="fl">53.71552</span> xmax<span class="sc">:</span> <span class="sc">-</span><span class="fl">1.337493</span> ymax<span class="sc">:</span> <span class="fl">53.92906</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>Geodetic CRS<span class="sc">:</span>  WGS <span class="dv">84</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co"># A tibble: 2,505 × 2</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>   interaction                                 geometry</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>                         <span class="er">&lt;</span>LINESTRING [°]<span class="sc">&gt;</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a> <span class="dv">1</span>       <span class="fl">2177.</span> (<span class="sc">-</span><span class="fl">1.400108</span> <span class="fl">53.92906</span>, <span class="sc">-</span><span class="fl">1.400108</span> <span class="fl">53.92906</span>)</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a> <span class="dv">2</span>        <span class="fl">632.</span> (<span class="sc">-</span><span class="fl">1.400108</span> <span class="fl">53.92906</span>, <span class="sc">-</span><span class="fl">1.346497</span> <span class="fl">53.92305</span>)</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a> <span class="dv">3</span>        <span class="fl">556.</span> (<span class="sc">-</span><span class="fl">1.346497</span> <span class="fl">53.92305</span>, <span class="sc">-</span><span class="fl">1.400108</span> <span class="fl">53.92906</span>)</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a> <span class="dv">4</span>       <span class="fl">1382.</span> (<span class="sc">-</span><span class="fl">1.346497</span> <span class="fl">53.92305</span>, <span class="sc">-</span><span class="fl">1.346497</span> <span class="fl">53.92305</span>)</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a> <span class="dv">5</span>        <span class="fl">449.</span> (<span class="sc">-</span><span class="fl">1.346497</span> <span class="fl">53.92305</span>, <span class="sc">-</span><span class="fl">1.357667</span> <span class="fl">53.88306</span>)</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a> <span class="dv">6</span>        <span class="fl">794.</span> (<span class="sc">-</span><span class="fl">1.704658</span> <span class="fl">53.91073</span>, <span class="sc">-</span><span class="fl">1.704658</span> <span class="fl">53.91073</span>)</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a> <span class="dv">7</span>        <span class="fl">749.</span>   (<span class="sc">-</span><span class="fl">1.704658</span> <span class="fl">53.91073</span>, <span class="sc">-</span><span class="fl">1.6876</span> <span class="fl">53.90066</span>)</span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a> <span class="dv">8</span>        <span class="fl">287.</span> (<span class="sc">-</span><span class="fl">1.704658</span> <span class="fl">53.91073</span>, <span class="sc">-</span><span class="fl">1.743949</span> <span class="fl">53.88035</span>)</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a> <span class="dv">9</span>        <span class="fl">267.</span> (<span class="sc">-</span><span class="fl">1.704658</span> <span class="fl">53.91073</span>, <span class="sc">-</span><span class="fl">1.710657</span> <span class="fl">53.87087</span>)</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="dv">10</span>        <span class="fl">186.</span> (<span class="sc">-</span><span class="fl">1.704658</span> <span class="fl">53.91073</span>, <span class="sc">-</span><span class="fl">1.694076</span> <span class="fl">53.86729</span>)</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="co"># ℹ 2,495 more rows</span></span></code></pre></div>
<p>The resulting estimates of interaction, returned in the column <code>interaction</code> and plotted with distance in the graphic above, resulted from our choice of spatial interaction model inputs, allowing a wide range of alternative approaches to be implemented. This flexibility is a key aspect of the package, enabling small and easily modified functions to be implemented and tested.</p>
<p>The output of <code><a href="reference/si_calculate.html">si_calculate()</a></code> is a geographic object that can be plotted with <code>sf</code>’s plot method (or other geographic data visualisation packages):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">od_res</span><span class="op">[</span><span class="st">"interaction"</span><span class="op">]</span>, logz <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-map-1.png"></p>
<p>The <code><a href="reference/si_to_od.html">si_to_od()</a></code> function transforms geographic entities (typically polygons and points) into a data frame representing the full combination of origin-destination pairs that are less than <code>max_dist</code> meters apart. A common saying in data science is that 80% of the effort goes into the pre-processing stage. This is equally true for spatial interaction modelling as it is for other types of data intensive analysis/modelling work. So what does this function return?</p>
<p>The function allows you to use any variable in the origin or destination data by joining all attributes onto the OD data frame, with column names appended with <code>origin</code> and <code>destination</code>.</p>
<p>The approach works equally well for ‘bipartite’ SIMs, in which origin and destination points are different (Hasova et al. <a href="https://lenkahas.com/files/preprint.pdf" class="external-link">2022</a>). The following example implements a bipartite SIM that estimates the number of trips from administrative zones to pubs in Leeds:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set n. trips to pubs, assuming that for every trip to the pub there are</span></span>
<span><span class="co"># 50 trips to work (this would be validated/tested/modelled in empirical work)</span></span>
<span><span class="va">zones_pubs</span> <span class="op">=</span> <span class="va">si_zones</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>to_pubs <span class="op">=</span> <span class="va">all</span> <span class="op">/</span> <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">pubs_example</span> <span class="op">=</span> <span class="va">si_pubs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"Chemic|Nag"</span>, x <span class="op">=</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">pubs_example</span><span class="op">$</span><span class="va">size</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">80</span><span class="op">)</span></span>
<span><span class="va">od_to_pubs</span> <span class="op">=</span> <span class="fu"><a href="reference/si_to_od.html">si_to_od</a></span><span class="op">(</span><span class="va">zones_pubs</span>, <span class="va">pubs_example</span><span class="op">)</span></span>
<span><span class="va">od_to_pubs_result</span> <span class="op">=</span> <span class="va">od_to_pubs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/si_calculate.html">si_calculate</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">gravity_model</span>, </span>
<span>               m <span class="op">=</span> <span class="va">origin_to_pubs</span>,</span>
<span>               n <span class="op">=</span> <span class="va">destination_size</span>,</span>
<span>               d <span class="op">=</span> <span class="va">distance_euclidean</span>,</span>
<span>               beta <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>               constraint_production <span class="op">=</span> <span class="va">origin_to_pubs</span><span class="op">)</span></span>
<span><span class="va">od_to_pubs_result</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">O</span>, <span class="va">D</span>, <span class="va">destination_name</span>, <span class="va">interaction</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>Simple feature collection with <span class="dv">214</span> features and <span class="dv">4</span> fields</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>Geometry type<span class="sc">:</span> LINESTRING</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>Dimension<span class="sc">:</span>     XY</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>Bounding box<span class="sc">:</span>  xmin<span class="sc">:</span> <span class="sc">-</span><span class="fl">1.743949</span> ymin<span class="sc">:</span> <span class="fl">53.71552</span> xmax<span class="sc">:</span> <span class="sc">-</span><span class="fl">1.337493</span> ymax<span class="sc">:</span> <span class="fl">53.92906</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>Geodetic CRS<span class="sc">:</span>  WGS <span class="dv">84</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co"># A tibble: 214 × 5</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>   O         D         destination_name  interaction                    geometry</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>     <span class="er">&lt;</span>chr<span class="sc">&gt;</span>     <span class="er">&lt;</span>chr<span class="sc">&gt;</span>                   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>            <span class="er">&lt;</span>LINESTRING [°]<span class="sc">&gt;</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a> <span class="dv">1</span> E02002330 <span class="dv">127960333</span> The Chemic Tavern        <span class="fl">18.4</span> (<span class="sc">-</span><span class="fl">1.400108</span> <span class="fl">53.92906</span>, <span class="sc">-</span><span class="fl">1.55</span>…</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a> <span class="dv">2</span> E02002331 <span class="dv">127960333</span> The Chemic Tavern        <span class="fl">15.9</span> (<span class="sc">-</span><span class="fl">1.346497</span> <span class="fl">53.92305</span>, <span class="sc">-</span><span class="fl">1.55</span>…</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a> <span class="dv">3</span> E02002332 <span class="dv">127960333</span> The Chemic Tavern        <span class="fl">25.5</span> (<span class="sc">-</span><span class="fl">1.704658</span> <span class="fl">53.91073</span>, <span class="sc">-</span><span class="fl">1.55</span>…</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a> <span class="dv">4</span> E02002333 <span class="dv">127960333</span> The Chemic Tavern        <span class="fl">38.7</span> (<span class="sc">-</span><span class="fl">1.6876</span> <span class="fl">53.90066</span>, <span class="sc">-</span><span class="fl">1.5528</span>…</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a> <span class="dv">5</span> E02002334 <span class="dv">127960333</span> The Chemic Tavern        <span class="fl">20.9</span> (<span class="sc">-</span><span class="fl">1.357667</span> <span class="fl">53.88306</span>, <span class="sc">-</span><span class="fl">1.55</span>…</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a> <span class="dv">6</span> E02002335 <span class="dv">127960333</span> The Chemic Tavern        <span class="fl">19.9</span> (<span class="sc">-</span><span class="fl">1.470966</span> <span class="fl">53.89184</span>, <span class="sc">-</span><span class="fl">1.55</span>…</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a> <span class="dv">7</span> E02002336 <span class="dv">127960333</span> The Chemic Tavern        <span class="fl">25.5</span> (<span class="sc">-</span><span class="fl">1.624775</span> <span class="fl">53.88589</span>, <span class="sc">-</span><span class="fl">1.55</span>…</span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a> <span class="dv">8</span> E02002337 <span class="dv">127960333</span> The Chemic Tavern        <span class="fl">37.2</span> (<span class="sc">-</span><span class="fl">1.743949</span> <span class="fl">53.88035</span>, <span class="sc">-</span><span class="fl">1.55</span>…</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a> <span class="dv">9</span> E02002338 <span class="dv">127960333</span> The Chemic Tavern        <span class="fl">36.8</span> (<span class="sc">-</span><span class="fl">1.710657</span> <span class="fl">53.87087</span>, <span class="sc">-</span><span class="fl">1.55</span>…</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="dv">10</span> E02002339 <span class="dv">127960333</span> The Chemic Tavern        <span class="fl">29.0</span> (<span class="sc">-</span><span class="fl">1.694076</span> <span class="fl">53.86729</span>, <span class="sc">-</span><span class="fl">1.55</span>…</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="co"># ℹ 204 more rows</span></span></code></pre></div>
<p>We can plot the top 20 desire lines between zone centroids and the 2 pubs in the example dataset as follows:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-tmap.github.io/tmap/" class="external-link">tmap</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tmap_mode.html" class="external-link">tmap_mode</a></span><span class="op">(</span><span class="st">"view"</span><span class="op">)</span></span>
<span><span class="va">od_to_pubs_result</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html" class="external-link">top_n</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span>, wt <span class="op">=</span> <span class="va">interaction</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_lines.html" class="external-link">tm_lines</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"interaction"</span>, palette <span class="op">=</span> <span class="st">"viridis"</span>, scale <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="https://user-images.githubusercontent.com/1825120/168485930-1adf9970-7dc1-4417-891e-2d5a1ec5e170.png"></p>
</div>
<div class="section level2">
<h2 id="feedback">Feedback<a class="anchor" aria-label="anchor" href="#feedback"></a>
</h2>
<p>We would be interested to hear how the approach presented in this package compared with other implementations such as those presented in the links below. If anyone would like to try the approach or implement it in another language feel free to get in touch via the issue tracker.</p>
</div>
<div class="section level2">
<h2 id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<p>For details on what SIMs are and how they have been defined mathematically and in code from first principles, see the <a href="https://robinlovelace.github.io/simodels/articles/sims-first-principles.html"><code>sims</code> vignette</a>.</p>
<p>To dive straight into using {simodels} to develop SIMs, see the <a href="https://robinlovelace.github.io/simodels/articles/simodels.html">Get started vignette</a>.</p>
<p>For a detailed introduction to SIMs, support by reproducible R code, see Adam Dennett’s <a href="https://doi.org/10.37970/aps.v2i2.38" class="external-link">2018 paper</a>.</p>
</div>
<div class="section level2">
<h2 id="other-sim-packages">Other SIM packages<a class="anchor" aria-label="anchor" href="#other-sim-packages"></a>
</h2>
<ul>
<li>The <a href="https://github.com/LukeCe/spflow" class="external-link"><code>spflow</code> R package</a>
</li>
<li>The <a href="https://spint.readthedocs.io/en/latest/" class="external-link"><code>spint</code> Python package</a>
</li>
<li>The <a href="https://cran.r-project.org/package=gravity" class="external-link"><code>gravity</code></a> R package</li>
<li>The <a href="https://covid-19-mobility-data-network.github.io/mobility/index.html" class="external-link"><code>mobility</code></a> R package</li>
<li>The <a href="https://scikit-mobility.github.io/scikit-mobility/reference/models.html#module-skmob.models.gravity" class="external-link">gravity functions in the scikit-mobility</a> Python package</li>
</ul>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=simodels" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/robinlovelace/simodels/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/robinlovelace/simodels/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>AGPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing simodels</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Robin Lovelace <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5679-6536" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Jakub Nowosad <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-1057-3721" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/robinlovelace/simodels/actions" class="external-link"><img src="https://github.com/robinlovelace/simodels/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://github.com/Robinlovelace/simodels/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/Robinlovelace/simodels/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robin Lovelace, Jakub Nowosad.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
